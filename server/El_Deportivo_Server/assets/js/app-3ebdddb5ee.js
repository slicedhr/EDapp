!function(){"use strict";function t(t,n,e,o){o.theme("default").primaryPalette("red").accentPalette("light-blue").warnPalette("teal"),e.html5Mode(!0),t.tokenGetter=function(){return sessionStorage.JWT},n.interceptors.push("jwtInterceptor"),n.interceptors.push("ErrorInterceptor")}function n(t,n,e,o,a,i,r){t.auth={},t.openMenu=function(t){r(t).toggle()},t.$on("$stateChangeStart",function(t,n,o,i,r){angular.equals(n.name,"login")&&sessionStorage.JWT&&(angular.equals(i.name,"")&&a.transitionTo("home"),t.preventDefault()),n.withoutAuthorization||sessionStorage.JWT||(e.clearSession(),t.preventDefault(),a.transitionTo("login"))}),t.$on("$stateChangeSuccess",function(t,n,e){}),t.$on("AuthError",function(e){n.warn("AuthError"),sessionStorage.JWT&&delete sessionStorage.JWT,t.auth.logged=!1,a.transitionTo("login")}),t.$on("ServerError",function(t){console.info(t),i.error("Al parecer ocurrió un error!","Error")})}function e(t,n,e,o,a){var i=this;this.loading=!1,sessionStorage.JWT?a.verify().then(function(n){t.auth.user=n.data.user},function(t){alert("Ocurrio un error! \r\n Detalle: \r\n "+JSON.stringify(t))}):t.$broadcast("AuthError"),t.$on("cfpLoadingBar:loading",function(t){i.loading=!0}),t.$on("cfpLoadingBar:completed",function(t){i.loading=!1})}e.$inject=["$rootScope","$scope","$timeout","$mdDialog","AuthService"],t.$inject=["jwtInterceptorProvider","$httpProvider","$locationProvider","$mdThemingProvider"],n.$inject=["$rootScope","$log","AuthService","$http","$state","toastr","$mdSidenav"],angular.module("elDeportivoServer",["ngMaterial","ui.router","angular-jwt","angular-loading-bar","toastr","ngAnimate","anim-in-out","login","categorias","users","notifications","home"]).controller("AppCtrl",e).config(t).run(n)}(),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("users/users.tpl.html","<h2>users</h2>\n<p>{{users.ctrlName}}</p>")}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("notifications/notifications.tpl.html",'<md-content class="notifications anim-slide-below-fade background">\n\n<div layout="column" layout-fill>\n  <md-toolbar class="notifications__toolbar md-whiteframe-z2 relative">\n    \n    <md-icon class="notifications__toolbar__iconbg" md-svg-icon="images/ic_notifications_black_24px.svg"></md-icon>\n    \n    <md-button class="md-icon-button button-menu" aria-label="menu" ng-click="openMenu(\'left\')">\n      <md-icon md-svg-icon="images/ic_menu_white_24px.svg"></md-icon>\n    </md-button>\n    <h2 class="text-center">\n      <span>Enviar Notificación</span>\n    </h2>\n  </md-toolbar>\n  <div class="background notifications__container" layout-padding>\n\n    <form ng-submit="notifications.send()" class="notifications__container__form md-whiteframe-z3">\n        \n        <md-input-container class="md-icon-float">\n            <label>Título(Solo en Android)</label>\n            <md-icon md-svg-src="images/ic_textsms_black_24px.svg" class="name"></md-icon>\n            <input type="text" ng-model="notifications.data.headings.en" required>\n        </md-input-container>\n\n        <md-input-container class="md-icon-float">\n            <label>Contenido</label>\n            <md-icon md-svg-src="images/ic_receipt_black_24px.svg" class="name"></md-icon>\n            <input type="text" ng-model="notifications.data.contents.en" required>\n        </md-input-container>\n\n        <md-input-container class="md-icon-float">\n            <label>Enlace a cargar en aplicación</label>\n            <md-icon md-svg-src="images/ic_link_black_24px.svg" class="name"></md-icon>\n            <input type="text" ng-model="notifications.data.data.link">\n        </md-input-container>\n\n        <md-input-container class="md-icon-float">\n            <label>Imagen</label>\n            <md-icon md-svg-src="images/ic_image_black_24px.svg" class="name"></md-icon>\n            <input type="text" ng-model="notifications.data.big_picture">\n        </md-input-container>\n\n\n        <md-checkbox class="md-primary" ng-model="notifications.data.isIos" aria-label="isIos">\n            ¿Para dispositivos IOS?\n        </md-checkbox>\n        <md-checkbox class="md-primary" ng-model="notifications.data.isAndroid" aria-label="isAndroid">\n            ¿Para dispositivos Android?\n        </md-checkbox>\n        \n        <div class="notifications__container__form__categorias">\n            <md-subheader>Categorias</md-subheader>\n            <md-list>\n             <!--  <md-list-item class="md-2-line">\n                    <md-checkbox class="md-primary" ng-model="notifications.selectedAll" aria-label="Tags" ng-change="notifications.selectAll()">\n                        \n                    </md-checkbox>\n                    <p>{{ notifications.selectedAll ? \'Deseleccionar\' : \'Seleccionar\' }} Todo</p>\n              </md-list-item> -->\n              <md-list-item class="md-2-line" ng-repeat="item in notifications.categorias">\n                    <md-checkbox class="md-primary" ng-model="notifications.data.tags[item.id]" aria-label="Tags" ng-change="notifications.addOrRemoveTag(item.id)">\n                        \n                    </md-checkbox>\n                    <p>{{ item.nombre }}</p>\n              </md-list-item>\n            </md-list>\n        </div>\n\n            \n        <md-button class="md-raised md-warn notifications__container__form__button" ng-disabled="loading" aria-label="Send"><md-icon md-svg-src="images/ic_send_white_24px.svg" class="name" flex></md-icon> Enviar</md-button>\n\n\n    </form>\n  </div>\n</div>\n\n<the-footer></the-footer>\n    \n</md-content>')}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("login/login.tpl.html",'<md-content class="login anim-fade">\n\n	<div layout="column" class="login__container md-whiteframe-z5">\n\n		<header class="login__container__header">\n			\n		</header>\n\n		<form ng-submit="login.send()" class="login__container__form">\n				\n			<md-input-container>\n				<label>Email</label>\n				<input type="email" ng-model="login.loginData.email" required>\n			</md-input-container>\n\n			<md-input-container>\n				<label>Password</label>\n				<input type="password" ng-model="login.loginData.password" required>\n			</md-input-container>\n\n			<div layout="row">\n				<md-button class="md-raised login__container__form__button" ng-disabled="isLoading" aria-label="Login button" flex>\n				<md-icon md-svg-src="images/ic_send_white_24px.svg" class="name" flex></md-icon> Ingresar</md-button>\n			</div>\n\n		</form>\n\n	</div>\n\n</md-content>\n')}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("home/the-footer-directive.tpl.html","<footer>\n	El Deportivo <br>\n© {{ theFooter.date }} - All Rights Reserved\n</footer>")}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("home/home.tpl.html",'<h2>home</h2>\n<p>{{home.ctrlName}}</p>\n\n<a class="md-button md-primary" ui-sref="categorias">Categorias</a>\n<a class="md-button md-primary" ui-sref="notifications">Notificaciones</a>')}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("categorias/categorias.tpl.html",'<md-content class="categorias anim-slide-below-fade background">\n\n	<div layout="column" layout-fill>\n	  	<div class="categorias__toolbar md-whiteframe-z2 relative">\n		    \n    		<md-icon class="categorias__toolbar__iconbg" md-svg-icon="images/ic_playlist_add_check_black_24px.svg"></md-icon>\n\n		    <md-button class="md-icon-button button-menu" aria-label="menu" ng-click="openMenu(\'left\')">\n		      <md-icon md-svg-icon="images/ic_menu_white_24px.svg"></md-icon>\n		    </md-button>\n		    <h2 class="text-center">\n		      <span>Categorias</span>\n		    </h2>\n		    <md-button class="md-fab md-warn categorias__toolbar__button" aria-label="description" ng-click="categorias.openDialog($event)">+\n			    <md-tooltip md-direction="bottom">\n			      Crear\n			    </md-tooltip>\n		    </md-button>\n		</div>\n	  	<div class="categorias__container background" layout-padding>\n\n			<md-list class="categorias__container__list md-whiteframe-z3">\n				\n				<md-list-item class="md-2-line" ng-if="!categorias.data.length">\n				  <p>No existe ningún registro.</p>\n				</md-list-item>\n\n				<div ng-if="categorias.data.length">\n\n				  <md-list-item class="md-2-line" ng-repeat="item in categorias.data">\n\n				    <p>{{ item.nombre }}</p> \n				    \n				    <md-button class="md-raised md-accent" ng-disabled="loading" aria-label="Edit" ng-click="categorias.openDialog($event, item)">\n\n						<md-icon md-svg-icon="images/ic_mode_edit_white_24px.svg"></md-icon>\n\n					</md-button>\n\n					<md-button class="md-raised md-primary" ng-disabled="loading" aria-label="Delete" ng-click="categorias.delete($event, item)">\n						\n						<md-icon md-svg-icon="images/ic_delete_forever_white_24px.svg"></md-icon>\n\n					</md-button>\n\n				  </md-list-item>\n\n			  </div>\n			</md-list>\n\n			\n		\n		</div>\n	</div>\n<the-footer></the-footer>\n\n</md-content>\n')}]),angular.module("elDeportivoServer").run(["$templateCache",function(t){t.put("categorias/categorias-form.tpl.html",'<md-dialog aria-label="Categorias">\n\n	<div layout="column" layout-fill>\n\n	  <md-toolbar>\n	    <h2 class="text-center">\n	      <span>Categoría</span>\n	    </h2>\n	  </md-toolbar>\n\n	  <md-content>\n	    <form ng-submit="categoriaForm.save()" layout-padding>\n\n			<md-input-container>\n				<label>Nombre</label>\n				<input type="text" ng-model="categoriaForm.data.nombre" required>\n			</md-input-container>\n\n\n			<div layout="row">\n				<md-button class="md-raised md-accent color-white" ng-disabled="loading" aria-label="Crear" flex><md-icon md-svg-src="images/ic_save_white_24px.svg" class="name" flex></md-icon> Guardar</md-button>\n			\n			</div>\n		</form>\n	  </md-content>\n	</div>\n	\n\n</md-dialog>')}]),function(){"use strict";angular.module("users",["ui.router"])}(),function(){"use strict";function t(t){t.state("users",{url:"/users",templateUrl:"users/users.tpl.html",controller:"UsersCtrl",controllerAs:"users"})}t.$inject=["$stateProvider"],angular.module("users").config(t)}(),function(){"use strict";function t(){var t=this;t.ctrlName="UsersCtrl"}angular.module("users").controller("UsersCtrl",t)}(),function(){"use strict";angular.module("notifications",["ui.router"])}(),function(){"use strict";function t(t){t.state("notifications",{url:"/notifications",templateUrl:"notifications/notifications.tpl.html",controller:"NotificationsCtrl",controllerAs:"notifications"})}t.$inject=["$stateProvider"],angular.module("notifications").config(t)}(),function(){"use strict";function t(t,n,e,o){var a=this;a.ctrlName="NotificationsCtrl",t.http({url:"categoria",method:"GET",prefix:!0}).then(function(t){a.categorias=t.data}),a.addOrRemoveTag=function(t){var e={};if(e[t]=!0,!n("filter")(a.data.tags,e)[0]){var o={};o[t]=!0,a.data.tags.push(o)}},a.selectAll=function(){a.data.tags=[],a.categorias.forEach(function(t,n){var e={};e[t.id]=a.selectedAll,a.data.tags[t.id]=a.selectedAll})},a.defaultData={contents:{},headings:{},isIos:!0,isAndroid:!0,tags:[],data:{},large_icon:"ic_onesignal_large_icon_default",big_picture:"",send_after:""},a.data=angular.copy(a.defaultData),a.send=function(){o.loading=!0;var n=[];if(a.data.tags.length&&a.data.tags.forEach(function(t,e){a.data.tags[Object.keys(t)[0]]&&n.push({key:Object.keys(t)[0],relation:"=",value:Object.keys(t)[0]})}),!n.length)return e.error("Se debe seleccionar al menos una categoría!","Err"),void(o.loading=!1);a.data.tags=n;var i={url:"/notificar",method:"POST",data:{data:a.data}};t.http(i).then(function(t){o.loading=!1,a.data=angular.copy(a.defaultData),e.success("Notificación Enviada!","Ok")})}}t.$inject=["AppService","$filter","toastr","$rootScope"],angular.module("notifications").controller("NotificationsCtrl",t)}(),function(){"use strict";angular.module("login",["ui.router"])}(),function(){"use strict";function t(t){t.state("login",{url:"/login",templateUrl:"login/login.tpl.html",controller:"LoginCtrl",controllerAs:"login",withoutAuthorization:!0}).state("logout",{url:"/logout",template:"Saliendo...",controller:["AuthService","$mdSidenav",function(t,n){n("left").close(),t.logout().then(function(){t.clearSession()})}]})}t.$inject=["$stateProvider"],angular.module("login").config(t)}(),function(){"use strict";function t(t,n,e,o,a){var i=this;n.bglogin=!0,this.init=function(){i.loginData={email:"admin@admin.com",password:"admin"}},this.send=function(){a.login(i.loginData).then(function(t){return t.data.err?void o.info("Email o Password incorrectos","Information"):(sessionStorage.JWT=t.data.token,n.auth.logged=!0,n.auth.user=t.data.user,void e.transitionTo("notifications"))},function(t){n.$broadcast("AuthError")})},this.init()}t.$inject=["$http","$rootScope","$state","toastr","AuthService"],angular.module("login").controller("LoginCtrl",t)}(),function(){"use strict";function t(t,n,e,o){var a={};return a.login=function(t){var n={method:"POST",skipAuthorization:!0,data:t,url:"/api/v1/login"};return o.http(n)},a.verify=function(){var t={method:"POST",skipAuthorization:!0,data:{token:sessionStorage.JWT},url:"/api/v1/verify"};return o.http(t)},a.clearSession=function(){t.auth={},delete sessionStorage.JWT,e.transitionTo("login")},a.logout=function(){return t.$broadcast("loading",!1),o.http({url:"login",prefix:!0,method:"DELETE"})},a}t.$inject=["$rootScope","$mdDialog","$state","AppService"],angular.module("login").factory("AuthService",t)}(),function(){"use strict";angular.module("home",["ui.router"])}(),function(){"use strict";function t(){return{restrict:"EA",scope:{},templateUrl:"home/the-footer-directive.tpl.html",replace:!1,controllerAs:"theFooter",controller:function(){var t=this;t.name="theFooter",t.date=(new Date).getFullYear()},link:function(t,n,e){}}}angular.module("home").directive("theFooter",t)}(),function(){"use strict";function t(t){t.state("home",{url:"/home",templateUrl:"home/home.tpl.html",controller:"HomeCtrl",controllerAs:"home"})}t.$inject=["$stateProvider"],angular.module("home").config(t)}(),function(){"use strict";function t(){var t=this;t.ctrlName="HomeCtrl"}angular.module("home").controller("HomeCtrl",t)}(),function(){"use strict";angular.module("categorias",["ui.router"])}(),function(){"use strict";function t(t){t.state("categorias",{url:"/categorias",templateUrl:"categorias/categorias.tpl.html",controller:"CategoriasCtrl",controllerAs:"categorias"})}t.$inject=["$stateProvider"],angular.module("categorias").config(t)}(),function(){"use strict";function t(t,n,e,o,a){var i=this;i.data=[],i.openDialog=function(n,o){function r(t,n,e,o){var a=this;this.data=t.selectedCategoria||{},this.save=function(){var t=a.data.id?"PUT":"POST",i={method:t,url:a.data.id?"categoria/"+a.data.id:"categoria",data:a.data,prefix:!0};o.http(i).then(function(n){e.hide({data:n.data,verb:t})})["catch"](function(){n.$broadcast("Err")})}}r.$inject=["$scope","$rootScope","$mdDialog","AppService"],t.selectedCategoria=angular.copy(o)||void 0,e.show({controller:r,controllerAs:"categoriaForm",templateUrl:"categorias/categorias-form.tpl.html",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!0,scope:t,preserveScope:!0}).then(function(t){"POST"===t.verb&&i.data.push(t.data),"PUT"===t.verb&&(i.data[i.data.indexOf(a("filter")(i.data,{id:t.data.id})[0])]=t.data)},function(){})},i["delete"]=function(t,n){var r=e.confirm().title("Confirmación").content("¿Realmente deseas eliminar este item?").ariaLabel("Delete Confirm").ok("Confirmar").cancel("Cancelar").targetEvent(t);e.show(r).then(function(){var t={url:"categoria/"+n.id,method:"DELETE",prefix:!0};o.http(t).then(function(t){i.data.splice(i.data.indexOf(a("filter")(i.data,{id:n.id})[0]),1)})},function(){})},o.http({url:"categoria?limit=99",method:"GET",prefix:!0}).then(function(t){i.data=t.data})["catch"](function(){n.$broadcast("Err")})}t.$inject=["$scope","$rootScope","$mdDialog","AppService","$filter"],angular.module("categorias").controller("CategoriasCtrl",t)}(),function(){"use strict";function t(t,n,e){var o={};return o.response=function(n){var e=n.status;return"Unauthorized"==n.statusText?void t.$broadcast("AuthError",e):e>=500&&600>e?void t.$broadcast("ServerError",e):n},o.responseError=function(o){return"Unauthorized"==o.statusText?t.$broadcast("AuthError",status):(e.warn("Error en el server."),e.warn(o),t.$broadcast("ServerError",o)),n.reject(o)},o}t.$inject=["$rootScope","$q","$log"],angular.module("elDeportivoServer").factory("ErrorInterceptor",t)}(),function(){"use strict";function t(t){var n={};return n.prefix="/api/v1/",n.http=function(e){return e.url=e.prefix?n.prefix+e.url:e.url,t(e)},n}t.$inject=["$http"],angular.module("elDeportivoServer").factory("AppService",t)}(),function(){"use strict";function t(t){t.otherwise("/login")}t.$inject=["$urlRouterProvider"],angular.module("elDeportivoServer").config(t)}();
//# sourceMappingURL=app-3ebdddb5ee.js.map
